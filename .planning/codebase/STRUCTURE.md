# BookZang Directory Structure

## Root Directory Layout

```
/Users/boss/Develpment/Bookzang Creator/
├── .claude/                    # Claude-specific configuration
│   └── skills/                 # Skill definitions for Claude
├── .cursor/                    # Cursor editor configuration
├── .planning/                  # Planning documents (this directory)
│   └── codebase/
│       ├── ARCHITECTURE.md     # Architecture documentation
│       └── STRUCTURE.md        # This file
├── convex/                     # Convex backend (serverless functions)
│   ├── _generated/             # Auto-generated by Convex
│   ├── auth.config.ts          # Auth provider configuration
│   ├── auth.ts                 # Authentication logic
│   ├── books.ts                # Book CRUD operations
│   ├── files.ts                # File storage operations
│   ├── http.ts                 # HTTP routes setup
│   ├── jobs.ts                 # Job queue management
│   ├── router.ts               # HTTP router
│   ├── schema.ts               # Database schema definition
│   └── templates.ts            # PDF template operations
├── node_modules/               # npm dependencies
├── Project docs/               # Project documentation
├── src/                        # React frontend source
│   ├── components/             # React components
│   ├── App.tsx                 # Root application component
│   ├── index.css               # Global styles + Tailwind
│   ├── main.tsx                # Application entry point
│   ├── SignInForm.tsx          # Authentication form
│   └── SignOutButton.tsx       # Sign out button
├── .env.local                  # Local environment variables
├── .gitignore                  # Git ignore rules
├── components.json             # shadcn/ui config (not used)
├── index.html                  # HTML entry point
├── package.json                # npm manifest
├── package-lock.json           # Lock file
├── postcss.config.cjs          # PostCSS configuration
├── README.md                   # Project readme
├── tailwind.config.js          # Tailwind CSS configuration
├── tsconfig.app.json           # TypeScript app config
├── tsconfig.json               # TypeScript base config
├── tsconfig.node.json          # TypeScript node config
└── vite.config.ts              # Vite build configuration
```

---

## Source Directory (`src/`)

### File Organization

```
src/
├── main.tsx                    # Entry point: Convex client + auth setup
├── App.tsx                     # Root component: auth gate + routing
├── index.css                   # Tailwind directives + custom CSS
├── SignInForm.tsx              # Login/signup form component
├── SignOutButton.tsx           # Sign out button component
└── components/                 # Page and feature components
    ├── Dashboard.tsx           # Main app shell with sidebar
    ├── ImportModal.tsx         # Book import modal (Gutenberg + Upload)
    ├── JobDetailsDrawer.tsx    # Job inspection drawer
    ├── JobsPage.tsx            # Jobs list page
    ├── LibraryPage.tsx         # Books grid + search page
    └── TemplatesPage.tsx       # Template selection page
```

### Where to Find Things

| What | Location |
|------|----------|
| **Main entry point** | `src/main.tsx` |
| **Root component** | `src/App.tsx` |
| **Global styles** | `src/index.css` |
| **Authentication UI** | `src/SignInForm.tsx`, `src/SignOutButton.tsx` |
| **Dashboard layout** | `src/components/Dashboard.tsx` |
| **Page components** | `src/components/*Page.tsx` |
| **Modals/Drawers** | `src/components/ImportModal.tsx`, `src/components/JobDetailsDrawer.tsx` |

---

## Convex Backend Directory (`convex/`)

### File Organization

```
convex/
├── _generated/                 # Auto-generated by Convex (do not edit)
│   ├── api.ts                  # Generated API client
│   ├── dataModel.ts            # Generated data types
│   └── server.ts               # Generated server utilities
├── auth.config.ts              # Auth provider configuration
├── auth.ts                     # Authentication setup + user query
├── books.ts                    # Book queries and mutations
├── files.ts                    # File storage mutations
├── http.ts                     # HTTP route configuration
├── jobs.ts                     # Job queries and mutations
├── router.ts                   # HTTP router base
├── schema.ts                   # Database schema definition
└── templates.ts                # Template queries and mutations
```

### Where to Find Things

| What | Location |
|------|----------|
| **Database schema** | `convex/schema.ts` |
| **Auth configuration** | `convex/auth.ts`, `convex/auth.config.ts` |
| **Book operations** | `convex/books.ts` |
| **Job queue** | `convex/jobs.ts` |
| **Templates** | `convex/templates.ts` |
| **File uploads** | `convex/files.ts` |
| **Generated types** | `convex/_generated/` |

---

## Component Organization

### Component Types

**Layout Components:**
- `Dashboard.tsx` - Main app shell with sidebar navigation

**Page Components:**
- `LibraryPage.tsx` - Displays book grid with search
- `JobsPage.tsx` - Shows job queue with status/progress
- `TemplatesPage.tsx` - Template selection gallery

**Modal/Overlay Components:**
- `ImportModal.tsx` - Dual-mode import (Gutenberg/File)
- `JobDetailsDrawer.tsx` - Slide-in job inspection panel

**Auth Components:**
- `SignInForm.tsx` - Authentication form (in `src/`)
- `SignOutButton.tsx` - Sign out button (in `src/`)

### Component Patterns

Each page component follows this structure:
```tsx
// 1. Imports
import { useQuery } from "convex/react";
import { api } from "../../convex/_generated/api";

// 2. Component
export function PageName() {
  // 3. Data fetching
  const data = useQuery(api.module.function);
  
  // 4. Loading state
  if (data === undefined) return <LoadingSpinner />;
  
  // 5. Empty state
  if (data.length === 0) return <EmptyState />;
  
  // 6. Render data
  return <DataView data={data} />;
}
```

---

## Key File Locations

### Configuration Files

| File | Purpose |
|------|---------|
| `package.json` | npm dependencies and scripts |
| `vite.config.ts` | Vite build configuration |
| `tailwind.config.js` | Tailwind CSS theme and utilities |
| `tsconfig.json` | TypeScript compiler configuration |
| `postcss.config.cjs` | PostCSS (for Tailwind) |
| `.env.local` | Environment variables (Convex URL) |

### Entry Points

| File | Description |
|------|-------------|
| `index.html` | HTML entry, loads Vite bundle |
| `src/main.tsx` | JavaScript entry, sets up Convex + React |
| `convex/schema.ts` | Backend entry point for schema |

### Styling

| File | Description |
|------|-------------|
| `src/index.css` | Global CSS, Tailwind directives, custom classes |
| `tailwind.config.js` | Theme configuration (colors, spacing) |

---

## Generated Files

### Auto-Generated (Do Not Edit)

```
convex/_generated/
├── api.ts              # Type-safe API client (regenerated on schema change)
├── dataModel.ts        # TypeScript types for documents
└── server.ts           # Server-side utilities
```

These are regenerated by `convex dev` when:
- Schema changes
- New functions are added

---

## Import Conventions

### Frontend Imports

```tsx
// Convex
import { useQuery, useMutation } from "convex/react";
import { api } from "../../convex/_generated/api";
import { Id } from "../../convex/_generated/dataModel";

// React
import { useState, useEffect } from "react";

// UI (Lucide icons)
import { IconName } from "lucide-react";

// Toast
import { toast } from "sonner";
```

### Backend Imports

```ts
// Convex server
import { query, mutation } from "./_generated/server";
import { v } from "convex/values";

// Auth
import { convexAuth, getAuthUserId } from "@convex-dev/auth/server";
import { Password, Anonymous } from "@convex-dev/auth/providers";
```
